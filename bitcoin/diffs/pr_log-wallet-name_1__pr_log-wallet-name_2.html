<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Diff to HTML by rtfpessoa</title>

    <!--
      Diff to HTML (template.html)
      Author: rtfpessoa
  -->

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/github.min.css">

    <style>
        .d2h-wrapper{text-align:left}.d2h-file-header{padding:5px 10px;border-bottom:1px solid #d8d8d8;background-color:#f7f7f7}.d2h-file-stats{display:-webkit-box;display:-ms-flexbox;display:flex;margin-left:auto;font-size:14px}.d2h-lines-added{text-align:right;border:1px solid #b4e2b4;border-radius:5px 0 0 5px;color:#399839;padding:2px;vertical-align:middle}.d2h-lines-deleted{text-align:left;border:1px solid #e9aeae;border-radius:0 5px 5px 0;color:#c33;padding:2px;vertical-align:middle;margin-left:1px}.d2h-file-name-wrapper{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;font-family:"Source Sans Pro","Helvetica Neue",Helvetica,Arial,sans-serif;font-size:15px}.d2h-file-name{white-space:nowrap;text-overflow:ellipsis;overflow-x:hidden;line-height:21px}.d2h-file-wrapper{border:1px solid #ddd;border-radius:3px;margin-bottom:1em}.d2h-diff-table{width:100%;border-collapse:collapse;font-family:Menlo,Consolas,monospace;font-size:13px}.d2h-diff-tbody>tr>td{height:20px;line-height:20px}.d2h-files-diff{display:block;width:100%;height:100%}.d2h-file-diff{overflow-x:scroll;overflow-y:hidden}.d2h-file-side-diff{display:inline-block;overflow-x:scroll;overflow-y:hidden;width:50%;margin-right:-4px;margin-bottom:-8px}.d2h-code-line{display:inline-block;white-space:nowrap;padding:0 10px;margin-left:80px}.d2h-code-side-line{display:inline-block;white-space:nowrap;padding:0 10px;margin-left:50px}.d2h-code-line del,.d2h-code-side-line del{display:inline-block;margin-top:-1px;text-decoration:none;background-color:#ffb6ba;border-radius:.2em}.d2h-code-line ins,.d2h-code-side-line ins{display:inline-block;margin-top:-1px;text-decoration:none;background-color:#97f295;border-radius:.2em;text-align:left}.d2h-code-line-prefix{display:inline;background:0 0;padding:0;word-wrap:normal;white-space:pre}.d2h-code-line-ctn{display:inline;background:0 0;padding:0;word-wrap:normal;white-space:pre}.line-num1{-webkit-box-sizing:border-box;box-sizing:border-box;float:left;width:40px;overflow:hidden;text-overflow:ellipsis;padding-left:3px}.line-num2{-webkit-box-sizing:border-box;box-sizing:border-box;float:right;width:40px;overflow:hidden;text-overflow:ellipsis;padding-left:3px}.d2h-code-linenumber{-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;width:86px;padding-left:2px;padding-right:2px;background-color:#fff;color:rgba(0,0,0,.3);text-align:right;border:solid #eee;border-width:0 1px 0 1px;cursor:pointer}.d2h-code-side-linenumber{-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;width:56px;padding-left:5px;padding-right:5px;background-color:#fff;color:rgba(0,0,0,.3);text-align:right;border:solid #eee;border-width:0 1px 0 1px;cursor:pointer;overflow:hidden;text-overflow:ellipsis}.d2h-del{background-color:#fee8e9;border-color:#e9aeae}.d2h-ins{background-color:#dfd;border-color:#b4e2b4}.d2h-info{background-color:#f8fafd;color:rgba(0,0,0,.3);border-color:#d5e4f2}.d2h-file-diff .d2h-del.d2h-change{background-color:#fdf2d0}.d2h-file-diff .d2h-ins.d2h-change{background-color:#ded}.d2h-file-list-wrapper{margin-bottom:10px}.d2h-file-list-wrapper a{text-decoration:none;color:#3572b0}.d2h-file-list-wrapper a:visited{color:#3572b0}.d2h-file-list-header{text-align:left}.d2h-file-list-title{font-weight:700}.d2h-file-list-line{display:-webkit-box;display:-ms-flexbox;display:flex;text-align:left}.d2h-file-list{display:block;list-style:none;padding:0;margin:0}.d2h-file-list>li{border-bottom:#ddd solid 1px;padding:5px 10px;margin:0}.d2h-file-list>li:last-child{border-bottom:none}.d2h-file-switch{display:none;font-size:10px;cursor:pointer}.d2h-icon-wrapper{line-height:31px}.d2h-icon{vertical-align:middle;margin-right:10px;fill:currentColor}.d2h-deleted{color:#c33}.d2h-added{color:#399839}.d2h-changed{color:#d0b44c}.d2h-moved{color:#3572b0}.d2h-tag{display:-webkit-box;display:-ms-flexbox;display:flex;font-size:10px;margin-left:5px;padding:0 2px;background-color:#fff}.d2h-deleted-tag{border:#c33 1px solid}.d2h-added-tag{border:#399839 1px solid}.d2h-changed-tag{border:#d0b44c 1px solid}.d2h-moved-tag{border:#3572b0 1px solid}.selecting-left .d2h-code-line,.selecting-left .d2h-code-line *,.selecting-left .d2h-code-side-line,.selecting-left .d2h-code-side-line *,.selecting-right td.d2h-code-linenumber,.selecting-right td.d2h-code-linenumber *,.selecting-right td.d2h-code-side-linenumber,.selecting-right td.d2h-code-side-linenumber *{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.selecting-left .d2h-code-line ::-moz-selection,.selecting-left .d2h-code-line::-moz-selection,.selecting-left .d2h-code-side-line ::-moz-selection,.selecting-left .d2h-code-side-line::-moz-selection,.selecting-right td.d2h-code-linenumber::-moz-selection,.selecting-right td.d2h-code-side-linenumber ::-moz-selection,.selecting-right td.d2h-code-side-linenumber::-moz-selection{background:0 0}.selecting-left .d2h-code-line ::selection,.selecting-left .d2h-code-line::selection,.selecting-left .d2h-code-side-line ::selection,.selecting-left .d2h-code-side-line::selection,.selecting-right td.d2h-code-linenumber::selection,.selecting-right td.d2h-code-side-linenumber ::selection,.selecting-right td.d2h-code-side-linenumber::selection{background:0 0}
    </style>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.3/jquery.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/languages/scala.min.js"></script>

    <script>
        !function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n||e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){(function(global){!function(){function Diff2HtmlUI(config){var cfg=config||{};cfg.diff?diffJson=Diff2Html.getJsonFromDiff(cfg.diff):cfg.json&&(diffJson=cfg.json),this._initSelection()}var highlightJS=require("./highlight.js-internals.js").HighlightJS,diffJson=null,currentSelectionColumnId=-1;Diff2HtmlUI.prototype.draw=function(targetId,config){var cfg=config||{};cfg.inputFormat="json";var $target=this._getTarget(targetId);$target.html(Diff2Html.getPrettyHtml(diffJson,cfg)),cfg.synchronisedScroll&&this.synchronisedScroll($target,cfg)},Diff2HtmlUI.prototype.synchronisedScroll=function(targetId){this._getTarget(targetId).find(".d2h-file-side-diff").scroll(function(){var $this=$(this);$this.closest(".d2h-file-wrapper").find(".d2h-file-side-diff").scrollLeft($this.scrollLeft())})},Diff2HtmlUI.prototype.fileListCloseable=function(targetId,startVisible){function show(){$showBtn.hide(),$hideBtn.show(),$fileList.show()}function hide(){$hideBtn.hide(),$showBtn.show(),$fileList.hide()}var $target=this._getTarget(targetId),hashTag=this._getHashTag(),$showBtn=$target.find(".d2h-show"),$hideBtn=$target.find(".d2h-hide"),$fileList=$target.find(".d2h-file-list");"files-summary-show"===hashTag?show():"files-summary-hide"===hashTag?hide():startVisible?show():hide(),$showBtn.click(show),$hideBtn.click(hide)},Diff2HtmlUI.prototype.highlightCode=function(targetId){this._getTarget(targetId).find(".d2h-file-wrapper").map(function(_i,file){var oldLinesState,newLinesState,$file=$(file),language=$file.data("lang");$file.find(".d2h-code-line-ctn").map(function(_j,line){var lineState,$line=$(line),text=line.textContent,lineParent=line.parentNode;lineState=-1!==lineParent.className.indexOf("d2h-del")?oldLinesState:newLinesState;var result=hljs.getLanguage(language)?hljs.highlight(language,text,!0,lineState):hljs.highlightAuto(text);-1!==lineParent.className.indexOf("d2h-del")?oldLinesState=result.top:-1!==lineParent.className.indexOf("d2h-ins")?newLinesState=result.top:(oldLinesState=result.top,newLinesState=result.top);var originalStream=highlightJS.nodeStream(line);if(originalStream.length){var resultNode=document.createElementNS("http://www.w3.org/1999/xhtml","div");resultNode.innerHTML=result.value,result.value=highlightJS.mergeStreams(originalStream,highlightJS.nodeStream(resultNode),text)}$line.addClass("hljs"),$line.addClass(result.language),$line.html(result.value)})})},Diff2HtmlUI.prototype._getTarget=function(targetId){var $target;return"object"==typeof targetId&&targetId instanceof jQuery?$target=targetId:"string"==typeof targetId?$target=$(targetId):(console.error("Wrong target provided! Falling back to default value 'body'."),console.log("Please provide a jQuery object or a valid DOM query string."),$target=$("body")),$target},Diff2HtmlUI.prototype._getHashTag=function(){var docUrl=document.URL,hashTagIndex=docUrl.indexOf("#"),hashTag=null;return-1!==hashTagIndex&&(hashTag=docUrl.substr(hashTagIndex+1)),hashTag},Diff2HtmlUI.prototype._distinct=function(collection){return collection.filter(function(v,i){return collection.indexOf(v)===i})},Diff2HtmlUI.prototype._initSelection=function(){var body=$("body"),that=this;body.on("mousedown",".d2h-diff-table",function(event){var target=$(event.target),table=target.closest(".d2h-diff-table");target.closest(".d2h-code-line,.d2h-code-side-line").length?(table.removeClass("selecting-left"),table.addClass("selecting-right"),currentSelectionColumnId=1):target.closest(".d2h-code-linenumber,.d2h-code-side-linenumber").length&&(table.removeClass("selecting-right"),table.addClass("selecting-left"),currentSelectionColumnId=0)}),body.on("copy",".d2h-diff-table",function(event){var clipboardData=event.originalEvent.clipboardData,text=that._getSelectedText();clipboardData.setData("text",text),event.preventDefault()})},Diff2HtmlUI.prototype._getSelectedText=function(){var doc=window.getSelection().getRangeAt(0).cloneContents(),nodes=doc.querySelectorAll("tr"),text="",idx=currentSelectionColumnId;return 0===nodes.length?text=doc.textContent:[].forEach.call(nodes,function(tr,i){var td=tr.cells[1===tr.cells.length?0:idx];text+=(i?"\n":"")+td.textContent.replace(/(?:\r\n|\r|\n)/g,"")}),text},module.exports.Diff2HtmlUI=Diff2HtmlUI,global.Diff2HtmlUI=Diff2HtmlUI}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./highlight.js-internals.js":2}],2:[function(require,module,exports){!function(){function HighlightJS(){}function escape(value){return value.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;")}function tag(node){return node.nodeName.toLowerCase()}var ArrayProto=[];HighlightJS.prototype.nodeStream=function(node){var result=[];return function _nodeStream(node,offset){for(var child=node.firstChild;child;child=child.nextSibling)3===child.nodeType?offset+=child.nodeValue.length:1===child.nodeType&&(result.push({event:"start",offset:offset,node:child}),offset=_nodeStream(child,offset),tag(child).match(/br|hr|img|input/)||result.push({event:"stop",offset:offset,node:child}));return offset}(node,0),result},HighlightJS.prototype.mergeStreams=function(original,highlighted,value){function selectStream(){return original.length&&highlighted.length?original[0].offset!==highlighted[0].offset?original[0].offset<highlighted[0].offset?original:highlighted:"start"===highlighted[0].event?original:highlighted:original.length?original:highlighted}function open(node){result+="<"+tag(node)+ArrayProto.map.call(node.attributes,function(a){return" "+a.nodeName+'="'+escape(a.value)+'"'}).join("")+">"}function close(node){result+="</"+tag(node)+">"}function render(event){("start"===event.event?open:close)(event.node)}for(var processed=0,result="",nodeStack=[];original.length||highlighted.length;){var stream=selectStream();if(result+=escape(value.substring(processed,stream[0].offset)),processed=stream[0].offset,stream===original){nodeStack.reverse().forEach(close);do{render(stream.splice(0,1)[0]),stream=selectStream()}while(stream===original&&stream.length&&stream[0].offset===processed);nodeStack.reverse().forEach(open)}else"start"===stream[0].event?nodeStack.push(stream[0].node):nodeStack.pop(),render(stream.splice(0,1)[0])}return result+escape(value.substr(processed))},module.exports.HighlightJS=new HighlightJS}()},{}]},{},[1]);
    </script>

    <script>
        $(document).ready(function() {
            var diff2htmlUi = new Diff2HtmlUI();
            diff2htmlUi.fileListCloseable("#diff", false);
            diff2htmlUi.synchronisedScroll("#diff", false);
            diff2htmlUi.highlightCode('#diff');
        });
    </script>
</head>
<body style="text-align: center; font-family: 'Source Sans Pro',sans-serif;">
<h1>pr/log-wallet-name.1..pr/log-wallet-name.2</h1>

<div id="diff">
    <div class="d2h-file-list-wrapper">
        <div class="d2h-file-list-header">
            <span class="d2h-file-list-title">Files changed (5)</span>
            <a class="d2h-file-switch d2h-hide">hide</a>
            <a class="d2h-file-switch d2h-show">show</a>
        </div>
        <ol class="d2h-file-list">
            <li class="d2h-file-list-line">
    <span class="d2h-file-name-wrapper">
      <span><svg aria-hidden="true" class="d2h-icon d2h-changed" height="16" title="modified" version="1.1"
                 viewBox="0 0 14 16" width="14">
    <path d="M13 1H1C0.45 1 0 1.45 0 2v12c0 0.55 0.45 1 1 1h12c0.55 0 1-0.45 1-1V2c0-0.55-0.45-1-1-1z m0 13H1V2h12v12zM4 8c0-1.66 1.34-3 3-3s3 1.34 3 3-1.34 3-3 3-3-1.34-3-3z"></path>
</svg></span>
      <a href="#d2h-993890" class="d2h-file-name">src/wallet/db.cpp</a>
      <span class="d2h-file-stats">
          <span class="d2h-lines-added">+1</span>
          <span class="d2h-lines-deleted">-1</span>
      </span>
    </span>
            </li>
            <li class="d2h-file-list-line">
    <span class="d2h-file-name-wrapper">
      <span><svg aria-hidden="true" class="d2h-icon d2h-changed" height="16" title="modified" version="1.1"
                 viewBox="0 0 14 16" width="14">
    <path d="M13 1H1C0.45 1 0 1.45 0 2v12c0 0.55 0.45 1 1 1h12c0.55 0 1-0.45 1-1V2c0-0.55-0.45-1-1-1z m0 13H1V2h12v12zM4 8c0-1.66 1.34-3 3-3s3 1.34 3 3-1.34 3-3 3-3-1.34-3-3z"></path>
</svg></span>
      <a href="#d2h-447875" class="d2h-file-name">src/wallet/rpcdump.cpp</a>
      <span class="d2h-file-stats">
          <span class="d2h-lines-added">+4</span>
          <span class="d2h-lines-deleted">-4</span>
      </span>
    </span>
            </li>
            <li class="d2h-file-list-line">
    <span class="d2h-file-name-wrapper">
      <span><svg aria-hidden="true" class="d2h-icon d2h-changed" height="16" title="modified" version="1.1"
                 viewBox="0 0 14 16" width="14">
    <path d="M13 1H1C0.45 1 0 1.45 0 2v12c0 0.55 0.45 1 1 1h12c0.55 0 1-0.45 1-1V2c0-0.55-0.45-1-1-1z m0 13H1V2h12v12zM4 8c0-1.66 1.34-3 3-3s3 1.34 3 3-1.34 3-3 3-3-1.34-3-3z"></path>
</svg></span>
      <a href="#d2h-048665" class="d2h-file-name">src/wallet/wallet.cpp</a>
      <span class="d2h-file-stats">
          <span class="d2h-lines-added">+35</span>
          <span class="d2h-lines-deleted">-37</span>
      </span>
    </span>
            </li>
            <li class="d2h-file-list-line">
    <span class="d2h-file-name-wrapper">
      <span><svg aria-hidden="true" class="d2h-icon d2h-changed" height="16" title="modified" version="1.1"
                 viewBox="0 0 14 16" width="14">
    <path d="M13 1H1C0.45 1 0 1.45 0 2v12c0 0.55 0.45 1 1 1h12c0.55 0 1-0.45 1-1V2c0-0.55-0.45-1-1-1z m0 13H1V2h12v12zM4 8c0-1.66 1.34-3 3-3s3 1.34 3 3-1.34 3-3 3-3-1.34-3-3z"></path>
</svg></span>
      <a href="#d2h-142430" class="d2h-file-name">src/wallet/wallet.h</a>
      <span class="d2h-file-stats">
          <span class="d2h-lines-added">+5</span>
          <span class="d2h-lines-deleted">-0</span>
      </span>
    </span>
            </li>
            <li class="d2h-file-list-line">
    <span class="d2h-file-name-wrapper">
      <span><svg aria-hidden="true" class="d2h-icon d2h-changed" height="16" title="modified" version="1.1"
                 viewBox="0 0 14 16" width="14">
    <path d="M13 1H1C0.45 1 0 1.45 0 2v12c0 0.55 0.45 1 1 1h12c0.55 0 1-0.45 1-1V2c0-0.55-0.45-1-1-1z m0 13H1V2h12v12zM4 8c0-1.66 1.34-3 3-3s3 1.34 3 3-1.34 3-3 3-3-1.34-3-3z"></path>
</svg></span>
      <a href="#d2h-312169" class="d2h-file-name">src/wallet/walletdb.cpp</a>
      <span class="d2h-file-stats">
          <span class="d2h-lines-added">+6</span>
          <span class="d2h-lines-deleted">-6</span>
      </span>
    </span>
            </li>
        </ol>
    </div><div class="d2h-wrapper">
    <div id="d2h-993890" class="d2h-file-wrapper" data-lang="cpp">
        <div class="d2h-file-header">
    <span class="d2h-file-name-wrapper">
    <span class="d2h-icon-wrapper"><svg aria-hidden="true" class="d2h-icon" height="16" version="1.1" viewBox="0 0 12 16" width="12">
    <path d="M6 5H2v-1h4v1zM2 8h7v-1H2v1z m0 2h7v-1H2v1z m0 2h7v-1H2v1z m10-7.5v9.5c0 0.55-0.45 1-1 1H1c-0.55 0-1-0.45-1-1V2c0-0.55 0.45-1 1-1h7.5l3.5 3.5z m-1 0.5L8 2H1v12h10V5z"></path>
</svg></span>
    <span class="d2h-file-name">src/wallet/db.cpp</span>
    <span class="d2h-tag d2h-changed d2h-changed-tag">CHANGED</span></span>
        </div>
        <div class="d2h-file-diff">
            <div class="d2h-code-wrapper">
                <table class="d2h-diff-table">
                    <tbody class="d2h-diff-tbody">
                    <tr>
                        <td class="d2h-code-linenumber d2h-info"></td>
                        <td class="d2h-info">
                            <div class="d2h-code-line d2h-info">@@ -323,7 +323,7 @@ bool BerkeleyBatch::VerifyEnvironment(const fs::path&amp; file_path, std::string&amp; er</div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">323</div>
                            <div class="line-num2">323</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">    fs::path walletDir = env-&gt;Directory();</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">324</div>
                            <div class="line-num2">324</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">325</div>
                            <div class="line-num2">325</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">    LogPrintf(&quot;Using BerkeleyDB version %s\n&quot;, DbEnv::version(0, 0, 0));</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-del">
                            <div class="line-num1">326</div>
                            <div class="line-num2"></div>
                        </td>
                        <td class="d2h-del">
                            <div class="d2h-code-line d2h-del">
                                <span class="d2h-code-line-prefix">-</span>
                                <span class="d2h-code-line-ctn">    LogPrintf(&quot;Using wallet <del>[%</del>s<del>]\</del>n&quot;, walletFile);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-ins">
                            <div class="line-num1"></div>
                            <div class="line-num2">326</div>
                        </td>
                        <td class="d2h-ins">
                            <div class="d2h-code-line d2h-ins">
                                <span class="d2h-code-line-prefix">+</span>
                                <span class="d2h-code-line-ctn">    LogPrintf(&quot;Using wallet <ins>%</ins>s<ins>\</ins>n&quot;, walletFile);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">327</div>
                            <div class="line-num2">327</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">328</div>
                            <div class="line-num2">328</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">    &#x2F;&#x2F; Wallet file must be a plain filename without a directory</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">329</div>
                            <div class="line-num2">329</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">    if (walletFile != fs::basename(walletFile) + fs::extension(walletFile))</span>
                            </div>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div id="d2h-447875" class="d2h-file-wrapper" data-lang="cpp">
        <div class="d2h-file-header">
    <span class="d2h-file-name-wrapper">
    <span class="d2h-icon-wrapper"><svg aria-hidden="true" class="d2h-icon" height="16" version="1.1" viewBox="0 0 12 16" width="12">
    <path d="M6 5H2v-1h4v1zM2 8h7v-1H2v1z m0 2h7v-1H2v1z m0 2h7v-1H2v1z m10-7.5v9.5c0 0.55-0.45 1-1 1H1c-0.55 0-1-0.45-1-1V2c0-0.55 0.45-1 1-1h7.5l3.5 3.5z m-1 0.5L8 2H1v12h10V5z"></path>
</svg></span>
    <span class="d2h-file-name">src/wallet/rpcdump.cpp</span>
    <span class="d2h-tag d2h-changed d2h-changed-tag">CHANGED</span></span>
        </div>
        <div class="d2h-file-diff">
            <div class="d2h-code-wrapper">
                <table class="d2h-diff-table">
                    <tbody class="d2h-diff-tbody">
                    <tr>
                        <td class="d2h-code-linenumber d2h-info"></td>
                        <td class="d2h-info">
                            <div class="d2h-code-line d2h-info">@@ -578,7 +578,7 @@ UniValue importwallet(const JSONRPCRequest&amp; request)</div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">578</div>
                            <div class="line-num2">578</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">                assert(key.VerifyPubKey(pubkey));</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">579</div>
                            <div class="line-num2">579</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">                CKeyID keyid = pubkey.GetID();</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">580</div>
                            <div class="line-num2">580</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">                if (pwallet-&gt;HaveKey(keyid)) {</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-del">
                            <div class="line-num1">581</div>
                            <div class="line-num2"></div>
                        </td>
                        <td class="d2h-del">
                            <div class="d2h-code-line d2h-del">
                                <span class="d2h-code-line-prefix">-</span>
                                <span class="d2h-code-line-ctn">                    <del>LogPrintf(&quot;[%s] </del>Skipping import of %s (key already present)\n&quot;, <del>pwallet-&gt;GetName(), </del>EncodeDestination(keyid));</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-ins">
                            <div class="line-num1"></div>
                            <div class="line-num2">581</div>
                        </td>
                        <td class="d2h-ins">
                            <div class="d2h-code-line d2h-ins">
                                <span class="d2h-code-line-prefix">+</span>
                                <span class="d2h-code-line-ctn">                    <ins>pwallet-&gt;WalletLogPrintf(&quot;</ins>Skipping import of %s (key already present)\n&quot;, EncodeDestination(keyid));</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">582</div>
                            <div class="line-num2">582</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">                    continue;</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">583</div>
                            <div class="line-num2">583</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">                }</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">584</div>
                            <div class="line-num2">584</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">                int64_t nTime = DecodeDumpTime(vstr[1]);</span>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="d2h-code-linenumber d2h-info"></td>
                        <td class="d2h-info">
                            <div class="d2h-code-line d2h-info">@@ -596,7 +596,7 @@ UniValue importwallet(const JSONRPCRequest&amp; request)</div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">596</div>
                            <div class="line-num2">596</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">                        fLabel = true;</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">597</div>
                            <div class="line-num2">597</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">                    }</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">598</div>
                            <div class="line-num2">598</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">                }</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-del">
                            <div class="line-num1">599</div>
                            <div class="line-num2"></div>
                        </td>
                        <td class="d2h-del">
                            <div class="d2h-code-line d2h-del">
                                <span class="d2h-code-line-prefix">-</span>
                                <span class="d2h-code-line-ctn">                <del>LogPrintf(&quot;[%s] </del>Importing %s...\n&quot;, <del>pwallet-&gt;GetName(), </del>EncodeDestination(keyid));</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-ins">
                            <div class="line-num1"></div>
                            <div class="line-num2">599</div>
                        </td>
                        <td class="d2h-ins">
                            <div class="d2h-code-line d2h-ins">
                                <span class="d2h-code-line-prefix">+</span>
                                <span class="d2h-code-line-ctn">                <ins>pwallet-&gt;WalletLogPrintf(&quot;</ins>Importing %s...\n&quot;, EncodeDestination(keyid));</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">600</div>
                            <div class="line-num2">600</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">                if (!pwallet-&gt;AddKeyPubKey(key, pubkey)) {</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">601</div>
                            <div class="line-num2">601</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">                    fGood = false;</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">602</div>
                            <div class="line-num2">602</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">                    continue;</span>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="d2h-code-linenumber d2h-info"></td>
                        <td class="d2h-info">
                            <div class="d2h-code-line d2h-info">@@ -610,11 +610,11 @@ UniValue importwallet(const JSONRPCRequest&amp; request)</div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">610</div>
                            <div class="line-num2">610</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">               CScript script = CScript(vData.begin(), vData.end());</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">611</div>
                            <div class="line-num2">611</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">               CScriptID id(script);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">612</div>
                            <div class="line-num2">612</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">               if (pwallet-&gt;HaveCScript(id)) {</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-del">
                            <div class="line-num1">613</div>
                            <div class="line-num2"></div>
                        </td>
                        <td class="d2h-del">
                            <div class="d2h-code-line d2h-del">
                                <span class="d2h-code-line-prefix">-</span>
                                <span class="d2h-code-line-ctn">                   <del>LogPrintf(&quot;[%s] </del>Skipping import of %s (script already present)\n&quot;, <del>pwallet-&gt;GetName(), </del>vstr[0]);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-ins">
                            <div class="line-num1"></div>
                            <div class="line-num2">613</div>
                        </td>
                        <td class="d2h-ins">
                            <div class="d2h-code-line d2h-ins">
                                <span class="d2h-code-line-prefix">+</span>
                                <span class="d2h-code-line-ctn">                   <ins>pwallet-&gt;WalletLogPrintf(&quot;</ins>Skipping import of %s (script already present)\n&quot;, vstr[0]);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">614</div>
                            <div class="line-num2">614</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">                   continue;</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">615</div>
                            <div class="line-num2">615</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">               }</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">616</div>
                            <div class="line-num2">616</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">               if(!pwallet-&gt;AddCScript(script)) {</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-del">
                            <div class="line-num1">617</div>
                            <div class="line-num2"></div>
                        </td>
                        <td class="d2h-del">
                            <div class="d2h-code-line d2h-del">
                                <span class="d2h-code-line-prefix">-</span>
                                <span class="d2h-code-line-ctn">                   <del>LogPrintf(&quot;[%s] </del>Error importing script %s\n&quot;, <del>pwallet-&gt;GetName(), </del>vstr[0]);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-ins">
                            <div class="line-num1"></div>
                            <div class="line-num2">617</div>
                        </td>
                        <td class="d2h-ins">
                            <div class="d2h-code-line d2h-ins">
                                <span class="d2h-code-line-prefix">+</span>
                                <span class="d2h-code-line-ctn">                   <ins>pwallet-&gt;WalletLogPrintf(&quot;</ins>Error importing script %s\n&quot;, vstr[0]);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">618</div>
                            <div class="line-num2">618</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">                   fGood = false;</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">619</div>
                            <div class="line-num2">619</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">                   continue;</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">620</div>
                            <div class="line-num2">620</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">               }</span>
                            </div>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div id="d2h-048665" class="d2h-file-wrapper" data-lang="cpp">
        <div class="d2h-file-header">
    <span class="d2h-file-name-wrapper">
    <span class="d2h-icon-wrapper"><svg aria-hidden="true" class="d2h-icon" height="16" version="1.1" viewBox="0 0 12 16" width="12">
    <path d="M6 5H2v-1h4v1zM2 8h7v-1H2v1z m0 2h7v-1H2v1z m0 2h7v-1H2v1z m10-7.5v9.5c0 0.55-0.45 1-1 1H1c-0.55 0-1-0.45-1-1V2c0-0.55 0.45-1 1-1h7.5l3.5 3.5z m-1 0.5L8 2H1v12h10V5z"></path>
</svg></span>
    <span class="d2h-file-name">src/wallet/wallet.cpp</span>
    <span class="d2h-tag d2h-changed d2h-changed-tag">CHANGED</span></span>
        </div>
        <div class="d2h-file-diff">
            <div class="d2h-code-wrapper">
                <table class="d2h-diff-table">
                    <tbody class="d2h-diff-tbody">
                    <tr>
                        <td class="d2h-code-linenumber d2h-info"></td>
                        <td class="d2h-info">
                            <div class="d2h-code-line d2h-info">@@ -346,8 +346,7 @@ bool CWallet::LoadCScript(const CScript&amp; redeemScript)</div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">346</div>
                            <div class="line-num2">346</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">    if (redeemScript.size() &gt; MAX_SCRIPT_ELEMENT_SIZE)</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">347</div>
                            <div class="line-num2">347</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">    {</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">348</div>
                            <div class="line-num2">348</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        std::string strAddr = EncodeDestination(CScriptID(redeemScript));</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-del">
                            <div class="line-num1">349</div>
                            <div class="line-num2"></div>
                        </td>
                        <td class="d2h-del">
                            <div class="d2h-code-line d2h-del">
                                <span class="d2h-code-line-prefix">-</span>
                                <span class="d2h-code-line-ctn">        <del>LogPrintf(&quot;[%</del>s<del>] %s</del>: Warning: This wallet contains a redeemScript of size %i which exceeds maximum size %i thus can never be redeemed. Do not use address %s.\n&quot;,</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-ins">
                            <div class="line-num1"></div>
                            <div class="line-num2">349</div>
                        </td>
                        <td class="d2h-ins">
                            <div class="d2h-code-line d2h-ins">
                                <span class="d2h-code-line-prefix">+</span>
                                <span class="d2h-code-line-ctn">        <ins>WalletLogPrintf(&quot;%</ins>s: Warning: This wallet contains a redeemScript of size %i which exceeds maximum size %i thus can never be redeemed. Do not use address %s.\n&quot;,<ins> __func__, redeemScript.size(), MAX_SCRIPT_ELEMENT_SIZE, strAddr);</ins></span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-del">
                            <div class="line-num1">350</div>
                            <div class="line-num2"></div>
                        </td>
                        <td class="d2h-del">
                            <div class="d2h-code-line d2h-del">
                                <span class="d2h-code-line-prefix">-</span>
                                <span class="d2h-code-line-ctn">                  GetName(), __func__, redeemScript.size(), MAX_SCRIPT_ELEMENT_SIZE, strAddr);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">351</div>
                            <div class="line-num2">350</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        return true;</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">352</div>
                            <div class="line-num2">351</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">    }</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">353</div>
                            <div class="line-num2">352</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="d2h-code-linenumber d2h-info"></td>
                        <td class="d2h-info">
                            <div class="d2h-code-line d2h-info">@@ -437,7 +436,7 @@ bool CWallet::ChangeWalletPassphrase(const SecureString&amp; strOldWalletPassphrase,</div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">437</div>
                            <div class="line-num2">436</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">                if (pMasterKey.second.nDeriveIterations &lt; 25000)</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">438</div>
                            <div class="line-num2">437</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">                    pMasterKey.second.nDeriveIterations = 25000;</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">439</div>
                            <div class="line-num2">438</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-del">
                            <div class="line-num1">440</div>
                            <div class="line-num2"></div>
                        </td>
                        <td class="d2h-del">
                            <div class="d2h-code-line d2h-del">
                                <span class="d2h-code-line-prefix">-</span>
                                <span class="d2h-code-line-ctn">                <del>LogPrintf(&quot;[%s] </del>Wallet passphrase changed to an nDeriveIterations of %i\n&quot;, <del>GetName(), </del>pMasterKey.second.nDeriveIterations);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-ins">
                            <div class="line-num1"></div>
                            <div class="line-num2">439</div>
                        </td>
                        <td class="d2h-ins">
                            <div class="d2h-code-line d2h-ins">
                                <span class="d2h-code-line-prefix">+</span>
                                <span class="d2h-code-line-ctn">                <ins>WalletLogPrintf(&quot;</ins>Wallet passphrase changed to an nDeriveIterations of %i\n&quot;, pMasterKey.second.nDeriveIterations);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">441</div>
                            <div class="line-num2">440</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">442</div>
                            <div class="line-num2">441</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">                if (!crypter.SetKeyFromPassphrase(strNewWalletPassphrase, pMasterKey.second.vchSalt, pMasterKey.second.nDeriveIterations, pMasterKey.second.nDerivationMethod))</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">443</div>
                            <div class="line-num2">442</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">                    return false;</span>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="d2h-code-linenumber d2h-info"></td>
                        <td class="d2h-info">
                            <div class="d2h-code-line d2h-info">@@ -645,7 +644,7 @@ bool CWallet::EncryptWallet(const SecureString&amp; strWalletPassphrase)</div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">645</div>
                            <div class="line-num2">644</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">    if (kMasterKey.nDeriveIterations &lt; 25000)</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">646</div>
                            <div class="line-num2">645</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        kMasterKey.nDeriveIterations = 25000;</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">647</div>
                            <div class="line-num2">646</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-del">
                            <div class="line-num1">648</div>
                            <div class="line-num2"></div>
                        </td>
                        <td class="d2h-del">
                            <div class="d2h-code-line d2h-del">
                                <span class="d2h-code-line-prefix">-</span>
                                <span class="d2h-code-line-ctn">    <del>LogPrintf(&quot;[%s] </del>Encrypting Wallet with an nDeriveIterations of %i\n&quot;, <del>GetName(), </del>kMasterKey.nDeriveIterations);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-ins">
                            <div class="line-num1"></div>
                            <div class="line-num2">647</div>
                        </td>
                        <td class="d2h-ins">
                            <div class="d2h-code-line d2h-ins">
                                <span class="d2h-code-line-prefix">+</span>
                                <span class="d2h-code-line-ctn">    <ins>WalletLogPrintf(&quot;</ins>Encrypting Wallet with an nDeriveIterations of %i\n&quot;, kMasterKey.nDeriveIterations);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">649</div>
                            <div class="line-num2">648</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">650</div>
                            <div class="line-num2">649</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">    if (!crypter.SetKeyFromPassphrase(strWalletPassphrase, kMasterKey.vchSalt, kMasterKey.nDeriveIterations, kMasterKey.nDerivationMethod))</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">651</div>
                            <div class="line-num2">650</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        return false;</span>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="d2h-code-linenumber d2h-info"></td>
                        <td class="d2h-info">
                            <div class="d2h-code-line d2h-info">@@ -901,7 +900,7 @@ bool CWallet::MarkReplaced(const uint256&amp; originalHash, const uint256&amp; newHash)</div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">901</div>
                            <div class="line-num2">900</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">902</div>
                            <div class="line-num2">901</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">    bool success = true;</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">903</div>
                            <div class="line-num2">902</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">    if (!batch.WriteTx(wtx)) {</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-del">
                            <div class="line-num1">904</div>
                            <div class="line-num2"></div>
                        </td>
                        <td class="d2h-del">
                            <div class="d2h-code-line d2h-del">
                                <span class="d2h-code-line-prefix">-</span>
                                <span class="d2h-code-line-ctn">        <del>LogPrintf(&quot;[%</del>s<del>] %s</del>: Updating batch tx %s failed\n&quot;, <del>GetName(), </del>__func__, wtx.GetHash().ToString());</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-ins">
                            <div class="line-num1"></div>
                            <div class="line-num2">903</div>
                        </td>
                        <td class="d2h-ins">
                            <div class="d2h-code-line d2h-ins">
                                <span class="d2h-code-line-prefix">+</span>
                                <span class="d2h-code-line-ctn">        <ins>WalletLogPrintf(&quot;%</ins>s: Updating batch tx %s failed\n&quot;, __func__, wtx.GetHash().ToString());</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">905</div>
                            <div class="line-num2">904</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        success = false;</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">906</div>
                            <div class="line-num2">905</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">    }</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">907</div>
                            <div class="line-num2">906</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="d2h-code-linenumber d2h-info"></td>
                        <td class="d2h-info">
                            <div class="d2h-code-line d2h-info">@@ -969,7 +968,7 @@ bool CWallet::AddToWallet(const CWalletTx&amp; wtxIn, bool fFlushOnClose)</div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">969</div>
                            <div class="line-num2">968</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">    }</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">970</div>
                            <div class="line-num2">969</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">971</div>
                            <div class="line-num2">970</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">    &#x2F;&#x2F;&#x2F;&#x2F; debug print</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-del">
                            <div class="line-num1">972</div>
                            <div class="line-num2"></div>
                        </td>
                        <td class="d2h-del">
                            <div class="d2h-code-line d2h-del">
                                <span class="d2h-code-line-prefix">-</span>
                                <span class="d2h-code-line-ctn">    <del>LogPrintf(&quot;[%s] </del>AddToWallet %s  %s%s\n&quot;, <del>GetName(), </del>wtxIn.GetHash().ToString(), (fInsertedNew ? &quot;new&quot; : &quot;&quot;), (fUpdated ? &quot;update&quot; : &quot;&quot;));</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-ins">
                            <div class="line-num1"></div>
                            <div class="line-num2">971</div>
                        </td>
                        <td class="d2h-ins">
                            <div class="d2h-code-line d2h-ins">
                                <span class="d2h-code-line-prefix">+</span>
                                <span class="d2h-code-line-ctn">    <ins>WalletLogPrintf(&quot;</ins>AddToWallet %s  %s%s\n&quot;, wtxIn.GetHash().ToString(), (fInsertedNew ? &quot;new&quot; : &quot;&quot;), (fUpdated ? &quot;update&quot; : &quot;&quot;));</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">973</div>
                            <div class="line-num2">972</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">974</div>
                            <div class="line-num2">973</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">    &#x2F;&#x2F; Write to disk</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">975</div>
                            <div class="line-num2">974</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">    if (fInsertedNew || fUpdated)</span>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="d2h-code-linenumber d2h-info"></td>
                        <td class="d2h-info">
                            <div class="d2h-code-line d2h-info">@@ -1039,7 +1038,7 @@ bool CWallet::AddToWalletIfInvolvingMe(const CTransactionRef&amp; ptx, const CBlockI</div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1039</div>
                            <div class="line-num2">1038</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">                std::pair&lt;TxSpends::const_iterator, TxSpends::const_iterator&gt; range = mapTxSpends.equal_range(txin.prevout);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1040</div>
                            <div class="line-num2">1039</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">                while (range.first != range.second) {</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1041</div>
                            <div class="line-num2">1040</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">                    if (range.first-&gt;second != tx.GetHash()) {</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-del">
                            <div class="line-num1">1042</div>
                            <div class="line-num2"></div>
                        </td>
                        <td class="d2h-del">
                            <div class="d2h-code-line d2h-del">
                                <span class="d2h-code-line-prefix">-</span>
                                <span class="d2h-code-line-ctn">                        <del>LogPrintf(&quot;[%s] </del>Transaction %s (in block %s) conflicts with wallet transaction %s (both spend %s:%i)\n&quot;, <del>GetName(), </del>tx.GetHash().ToString(), pIndex-&gt;GetBlockHash().ToString(), range.first-&gt;second.ToString(), range.first-&gt;first.hash.ToString(), range.first-&gt;first.n);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-ins">
                            <div class="line-num1"></div>
                            <div class="line-num2">1041</div>
                        </td>
                        <td class="d2h-ins">
                            <div class="d2h-code-line d2h-ins">
                                <span class="d2h-code-line-prefix">+</span>
                                <span class="d2h-code-line-ctn">                        <ins>WalletLogPrintf(&quot;</ins>Transaction %s (in block %s) conflicts with wallet transaction %s (both spend %s:%i)\n&quot;, tx.GetHash().ToString(), pIndex-&gt;GetBlockHash().ToString(), range.first-&gt;second.ToString(), range.first-&gt;first.hash.ToString(), range.first-&gt;first.n);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1043</div>
                            <div class="line-num2">1042</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">                        MarkConflicted(pIndex-&gt;GetBlockHash(), range.first-&gt;second);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1044</div>
                            <div class="line-num2">1043</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">                    }</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1045</div>
                            <div class="line-num2">1044</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">                    range.first++;</span>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="d2h-code-linenumber d2h-info"></td>
                        <td class="d2h-info">
                            <div class="d2h-code-line d2h-info">@@ -1065,11 +1064,11 @@ bool CWallet::AddToWalletIfInvolvingMe(const CTransactionRef&amp; ptx, const CBlockI</div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1065</div>
                            <div class="line-num2">1064</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">                for (const CKeyID &amp;keyid : vAffected) {</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1066</div>
                            <div class="line-num2">1065</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">                    std::map&lt;CKeyID, int64_t&gt;::const_iterator mi = m_pool_key_to_index.find(keyid);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1067</div>
                            <div class="line-num2">1066</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">                    if (mi != m_pool_key_to_index.end()) {</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-del">
                            <div class="line-num1">1068</div>
                            <div class="line-num2"></div>
                        </td>
                        <td class="d2h-del">
                            <div class="d2h-code-line d2h-del">
                                <span class="d2h-code-line-prefix">-</span>
                                <span class="d2h-code-line-ctn">                        <del>LogPrintf(&quot;[%</del>s<del>] %s</del>: Detected a used keypool key, mark all keypool key up to this key as used\n&quot;, <del>GetName(), </del>__func__);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-ins">
                            <div class="line-num1"></div>
                            <div class="line-num2">1067</div>
                        </td>
                        <td class="d2h-ins">
                            <div class="d2h-code-line d2h-ins">
                                <span class="d2h-code-line-prefix">+</span>
                                <span class="d2h-code-line-ctn">                        <ins>WalletLogPrintf(&quot;%</ins>s: Detected a used keypool key, mark all keypool key up to this key as used\n&quot;, __func__);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1069</div>
                            <div class="line-num2">1068</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">                        MarkReserveKeysAsUsed(mi-&gt;second);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1070</div>
                            <div class="line-num2">1069</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1071</div>
                            <div class="line-num2">1070</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">                        if (!TopUpKeyPool()) {</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-del">
                            <div class="line-num1">1072</div>
                            <div class="line-num2"></div>
                        </td>
                        <td class="d2h-del">
                            <div class="d2h-code-line d2h-del">
                                <span class="d2h-code-line-prefix">-</span>
                                <span class="d2h-code-line-ctn">                            <del>LogPrintf(&quot;[%</del>s<del>] %s</del>: Topping up keypool failed (locked wallet)\n&quot;, <del>GetName(), </del>__func__);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-ins">
                            <div class="line-num1"></div>
                            <div class="line-num2">1071</div>
                        </td>
                        <td class="d2h-ins">
                            <div class="d2h-code-line d2h-ins">
                                <span class="d2h-code-line-prefix">+</span>
                                <span class="d2h-code-line-ctn">                            <ins>WalletLogPrintf(&quot;%</ins>s: Topping up keypool failed (locked wallet)\n&quot;, __func__);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1073</div>
                            <div class="line-num2">1072</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">                        }</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1074</div>
                            <div class="line-num2">1073</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">                    }</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1075</div>
                            <div class="line-num2">1074</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">                }</span>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="d2h-code-linenumber d2h-info"></td>
                        <td class="d2h-info">
                            <div class="d2h-code-line d2h-info">@@ -1669,8 +1668,8 @@ void CWalletTx::GetAmounts(std::list&lt;COutputEntry&gt;&amp; listReceived,</div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1669</div>
                            <div class="line-num2">1668</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1670</div>
                            <div class="line-num2">1669</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        if (!ExtractDestination(txout.scriptPubKey, address) &amp;&amp; !txout.scriptPubKey.IsUnspendable())</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1671</div>
                            <div class="line-num2">1670</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        {</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-del">
                            <div class="line-num1">1672</div>
                            <div class="line-num2"></div>
                        </td>
                        <td class="d2h-del">
                            <div class="d2h-code-line d2h-del">
                                <span class="d2h-code-line-prefix">-</span>
                                <span class="d2h-code-line-ctn">            <del>LogPrintf(&quot;[%s] </del>CWalletTx::GetAmounts: Unknown transaction type found, txid %s\n&quot;,</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-del">
                            <div class="line-num1">1673</div>
                            <div class="line-num2"></div>
                        </td>
                        <td class="d2h-del">
                            <div class="d2h-code-line d2h-del">
                                <span class="d2h-code-line-prefix">-</span>
                                <span class="d2h-code-line-ctn"><del>                      pwallet-&gt;GetName(), </del>this-&gt;GetHash().ToString());</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-ins">
                            <div class="line-num1"></div>
                            <div class="line-num2">1671</div>
                        </td>
                        <td class="d2h-ins">
                            <div class="d2h-code-line d2h-ins">
                                <span class="d2h-code-line-prefix">+</span>
                                <span class="d2h-code-line-ctn">            <ins>pwallet-&gt;WalletLogPrintf(&quot;</ins>CWalletTx::GetAmounts: Unknown transaction type found, txid %s\n&quot;,</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-ins">
                            <div class="line-num1"></div>
                            <div class="line-num2">1672</div>
                        </td>
                        <td class="d2h-ins">
                            <div class="d2h-code-line d2h-ins">
                                <span class="d2h-code-line-prefix">+</span>
                                <span class="d2h-code-line-ctn"><ins>                                     </ins>this-&gt;GetHash().ToString());</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1674</div>
                            <div class="line-num2">1673</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">            address = CNoDestination();</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1675</div>
                            <div class="line-num2">1674</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        }</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1676</div>
                            <div class="line-num2">1675</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="d2h-code-linenumber d2h-info"></td>
                        <td class="d2h-info">
                            <div class="d2h-code-line d2h-info">@@ -1704,7 +1703,7 @@ int64_t CWallet::RescanFromTime(int64_t startTime, const WalletRescanReserver&amp; r</div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1704</div>
                            <div class="line-num2">1703</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">    {</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1705</div>
                            <div class="line-num2">1704</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        LOCK(cs_main);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1706</div>
                            <div class="line-num2">1705</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        startBlock = chainActive.FindEarliestAtLeast(startTime - TIMESTAMP_WINDOW);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-del">
                            <div class="line-num1">1707</div>
                            <div class="line-num2"></div>
                        </td>
                        <td class="d2h-del">
                            <div class="d2h-code-line d2h-del">
                                <span class="d2h-code-line-prefix">-</span>
                                <span class="d2h-code-line-ctn">        <del>LogPrintf(&quot;[%</del>s<del>] %s</del>: Rescanning last %i blocks\n&quot;, <del>GetName(), </del>__func__, startBlock ? chainActive.Height() - startBlock-&gt;nHeight + 1 : 0);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-ins">
                            <div class="line-num1"></div>
                            <div class="line-num2">1706</div>
                        </td>
                        <td class="d2h-ins">
                            <div class="d2h-code-line d2h-ins">
                                <span class="d2h-code-line-prefix">+</span>
                                <span class="d2h-code-line-ctn">        <ins>WalletLogPrintf(&quot;%</ins>s: Rescanning last %i blocks\n&quot;, __func__, startBlock ? chainActive.Height() - startBlock-&gt;nHeight + 1 : 0);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1708</div>
                            <div class="line-num2">1707</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">    }</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1709</div>
                            <div class="line-num2">1708</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1710</div>
                            <div class="line-num2">1709</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">    if (startBlock) {</span>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="d2h-code-linenumber d2h-info"></td>
                        <td class="d2h-info">
                            <div class="d2h-code-line d2h-info">@@ -1745,7 +1744,7 @@ CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, CBlock</div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1745</div>
                            <div class="line-num2">1744</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">    CBlockIndex* pindex = pindexStart;</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1746</div>
                            <div class="line-num2">1745</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">    CBlockIndex* ret = nullptr;</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1747</div>
                            <div class="line-num2">1746</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-del">
                            <div class="line-num1">1748</div>
                            <div class="line-num2"></div>
                        </td>
                        <td class="d2h-del">
                            <div class="d2h-code-line d2h-del">
                                <span class="d2h-code-line-prefix">-</span>
                                <span class="d2h-code-line-ctn">    if (pindex) <del>LogPrintf(&quot;[%s] </del>Rescan started from block %d...\n&quot;, <del>GetName(), </del>pindex-&gt;nHeight);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-ins">
                            <div class="line-num1"></div>
                            <div class="line-num2">1747</div>
                        </td>
                        <td class="d2h-ins">
                            <div class="d2h-code-line d2h-ins">
                                <span class="d2h-code-line-prefix">+</span>
                                <span class="d2h-code-line-ctn">    if (pindex) <ins>WalletLogPrintf(&quot;</ins>Rescan started from block %d...\n&quot;, pindex-&gt;nHeight);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1749</div>
                            <div class="line-num2">1748</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1750</div>
                            <div class="line-num2">1749</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">    {</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1751</div>
                            <div class="line-num2">1750</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        fAbortRescan = false;</span>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="d2h-code-linenumber d2h-info"></td>
                        <td class="d2h-info">
                            <div class="d2h-code-line d2h-info">@@ -1771,7 +1770,7 @@ CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, CBlock</div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1771</div>
                            <div class="line-num2">1770</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">            }</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1772</div>
                            <div class="line-num2">1771</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">            if (GetTime() &gt;= nNow + 60) {</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1773</div>
                            <div class="line-num2">1772</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">                nNow = GetTime();</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-del">
                            <div class="line-num1">1774</div>
                            <div class="line-num2"></div>
                        </td>
                        <td class="d2h-del">
                            <div class="d2h-code-line d2h-del">
                                <span class="d2h-code-line-prefix">-</span>
                                <span class="d2h-code-line-ctn">                <del>LogPrintf(&quot;[%s] </del>Still rescanning. At block %d. Progress=%f\n&quot;, <del>GetName(), </del>pindex-&gt;nHeight, progress_current);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-ins">
                            <div class="line-num1"></div>
                            <div class="line-num2">1773</div>
                        </td>
                        <td class="d2h-ins">
                            <div class="d2h-code-line d2h-ins">
                                <span class="d2h-code-line-prefix">+</span>
                                <span class="d2h-code-line-ctn">                <ins>WalletLogPrintf(&quot;</ins>Still rescanning. At block %d. Progress=%f\n&quot;, pindex-&gt;nHeight, progress_current);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1775</div>
                            <div class="line-num2">1774</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">            }</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1776</div>
                            <div class="line-num2">1775</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1777</div>
                            <div class="line-num2">1776</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">            CBlock block;</span>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="d2h-code-linenumber d2h-info"></td>
                        <td class="d2h-info">
                            <div class="d2h-code-line d2h-info">@@ -1804,9 +1803,9 @@ CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, CBlock</div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1804</div>
                            <div class="line-num2">1803</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">            }</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1805</div>
                            <div class="line-num2">1804</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        }</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1806</div>
                            <div class="line-num2">1805</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        if (pindex &amp;&amp; fAbortRescan) {</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-del">
                            <div class="line-num1">1807</div>
                            <div class="line-num2"></div>
                        </td>
                        <td class="d2h-del">
                            <div class="d2h-code-line d2h-del">
                                <span class="d2h-code-line-prefix">-</span>
                                <span class="d2h-code-line-ctn">            <del>LogPrintf(&quot;[%s] </del>Rescan aborted at block %d. Progress=%f\n&quot;, <del>GetName(), </del>pindex-&gt;nHeight, progress_current);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-ins">
                            <div class="line-num1"></div>
                            <div class="line-num2">1806</div>
                        </td>
                        <td class="d2h-ins">
                            <div class="d2h-code-line d2h-ins">
                                <span class="d2h-code-line-prefix">+</span>
                                <span class="d2h-code-line-ctn">            <ins>WalletLogPrintf(&quot;</ins>Rescan aborted at block %d. Progress=%f\n&quot;, pindex-&gt;nHeight, progress_current);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1808</div>
                            <div class="line-num2">1807</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        } else if (pindex &amp;&amp; ShutdownRequested()) {</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-del">
                            <div class="line-num1">1809</div>
                            <div class="line-num2"></div>
                        </td>
                        <td class="d2h-del">
                            <div class="d2h-code-line d2h-del">
                                <span class="d2h-code-line-prefix">-</span>
                                <span class="d2h-code-line-ctn">            <del>LogPrintf(&quot;[%s] </del>Rescan interrupted by shutdown request at block %d. Progress=%f\n&quot;, <del>GetName(), </del>pindex-&gt;nHeight, progress_current);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-ins">
                            <div class="line-num1"></div>
                            <div class="line-num2">1808</div>
                        </td>
                        <td class="d2h-ins">
                            <div class="d2h-code-line d2h-ins">
                                <span class="d2h-code-line-prefix">+</span>
                                <span class="d2h-code-line-ctn">            <ins>WalletLogPrintf(&quot;</ins>Rescan interrupted by shutdown request at block %d. Progress=%f\n&quot;, pindex-&gt;nHeight, progress_current);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1810</div>
                            <div class="line-num2">1809</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        }</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1811</div>
                            <div class="line-num2">1810</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        ShowProgress(strprintf(_(&quot;[%s] Rescanning...&quot;), GetName()), 100); &#x2F;&#x2F; hide progress dialog in GUI</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1812</div>
                            <div class="line-num2">1811</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">    }</span>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="d2h-code-linenumber d2h-info"></td>
                        <td class="d2h-info">
                            <div class="d2h-code-line d2h-info">@@ -1851,7 +1850,7 @@ bool CWalletTx::RelayWalletTransaction(CConnman* connman)</div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1851</div>
                            <div class="line-num2">1850</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        CValidationState state;</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1852</div>
                            <div class="line-num2">1851</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        &#x2F;* GetDepthInMainChain already catches known conflicts. *&#x2F;</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1853</div>
                            <div class="line-num2">1852</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        if (InMempool() || AcceptToMemoryPool(maxTxFee, state)) {</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-del">
                            <div class="line-num1">1854</div>
                            <div class="line-num2"></div>
                        </td>
                        <td class="d2h-del">
                            <div class="d2h-code-line d2h-del">
                                <span class="d2h-code-line-prefix">-</span>
                                <span class="d2h-code-line-ctn">            <del>LogPrintf(&quot;[%s] </del>Relaying wtx %s\n&quot;, <del>pwallet-&gt;GetName(), </del>GetHash().ToString());</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-ins">
                            <div class="line-num1"></div>
                            <div class="line-num2">1853</div>
                        </td>
                        <td class="d2h-ins">
                            <div class="d2h-code-line d2h-ins">
                                <span class="d2h-code-line-prefix">+</span>
                                <span class="d2h-code-line-ctn">            <ins>pwallet-&gt;WalletLogPrintf(&quot;</ins>Relaying wtx %s\n&quot;, GetHash().ToString());</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1855</div>
                            <div class="line-num2">1854</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">            if (connman) {</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1856</div>
                            <div class="line-num2">1855</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">                CInv inv(MSG_TX, GetHash());</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1857</div>
                            <div class="line-num2">1856</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">                connman-&gt;ForEachNode([&amp;inv](CNode* pnode)</span>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="d2h-code-linenumber d2h-info"></td>
                        <td class="d2h-info">
                            <div class="d2h-code-line d2h-info">@@ -2127,7 +2126,7 @@ void CWallet::ResendWalletTransactions(int64_t nBestBlockTime, CConnman* connman</div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">2127</div>
                            <div class="line-num2">2126</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">    &#x2F;&#x2F; block was found:</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">2128</div>
                            <div class="line-num2">2127</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">    std::vector&lt;uint256&gt; relayed = ResendWalletTransactionsBefore(nBestBlockTime-5*60, connman);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">2129</div>
                            <div class="line-num2">2128</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">    if (!relayed.empty())</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-del">
                            <div class="line-num1">2130</div>
                            <div class="line-num2"></div>
                        </td>
                        <td class="d2h-del">
                            <div class="d2h-code-line d2h-del">
                                <span class="d2h-code-line-prefix">-</span>
                                <span class="d2h-code-line-ctn">        <del>LogPrintf(&quot;[%</del>s<del>] %s</del>: rebroadcast %u unconfirmed transactions\n&quot;, <del>GetName(), </del>__func__, relayed.size());</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-ins">
                            <div class="line-num1"></div>
                            <div class="line-num2">2129</div>
                        </td>
                        <td class="d2h-ins">
                            <div class="d2h-code-line d2h-ins">
                                <span class="d2h-code-line-prefix">+</span>
                                <span class="d2h-code-line-ctn">        <ins>WalletLogPrintf(&quot;%</ins>s: rebroadcast %u unconfirmed transactions\n&quot;, __func__, relayed.size());</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">2131</div>
                            <div class="line-num2">2130</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">}</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">2132</div>
                            <div class="line-num2">2131</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">2133</div>
                            <div class="line-num2">2132</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">&#x2F;** @} *&#x2F; &#x2F;&#x2F; end of mapWallet</span>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="d2h-code-linenumber d2h-info"></td>
                        <td class="d2h-info">
                            <div class="d2h-code-line d2h-info">@@ -3088,8 +3087,7 @@ bool CWallet::CreateTransaction(const std::vector&lt;CRecipient&gt;&amp; vecSend, CTransac</div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3088</div>
                            <div class="line-num2">3087</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        }</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3089</div>
                            <div class="line-num2">3088</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">    }</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3090</div>
                            <div class="line-num2">3089</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-del">
                            <div class="line-num1">3091</div>
                            <div class="line-num2"></div>
                        </td>
                        <td class="d2h-del">
                            <div class="d2h-code-line d2h-del">
                                <span class="d2h-code-line-prefix">-</span>
                                <span class="d2h-code-line-ctn">    <del>LogPrintf(&quot;[%s] </del>Fee Calculation: Fee:%d Bytes:%u Needed:%d Tgt:%d (requested %d) Reason:\&quot;%s\&quot; Decay %.5f: Estimation: (%g - %g) %.2f%% %.1f&#x2F;(%.1f %d mem %.1f out) Fail: (%g - %g) %.2f%% %.1f&#x2F;(%.1f %d mem %.1f out)\n&quot;,</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-ins">
                            <div class="line-num1"></div>
                            <div class="line-num2">3090</div>
                        </td>
                        <td class="d2h-ins">
                            <div class="d2h-code-line d2h-ins">
                                <span class="d2h-code-line-prefix">+</span>
                                <span class="d2h-code-line-ctn">    <ins>WalletLogPrintf(&quot;</ins>Fee Calculation: Fee:%d Bytes:%u Needed:%d Tgt:%d (requested %d) Reason:\&quot;%s\&quot; Decay %.5f: Estimation: (%g - %g) %.2f%% %.1f&#x2F;(%.1f %d mem %.1f out) Fail: (%g - %g) %.2f%% %.1f&#x2F;(%.1f %d mem %.1f out)\n&quot;,</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-del">
                            <div class="line-num1">3092</div>
                            <div class="line-num2"></div>
                        </td>
                        <td class="d2h-del">
                            <div class="d2h-code-line d2h-del">
                                <span class="d2h-code-line-prefix">-</span>
                                <span class="d2h-code-line-ctn">              GetName(),</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3093</div>
                            <div class="line-num2">3091</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">              nFeeRet, nBytes, nFeeNeeded, feeCalc.returnedTarget, feeCalc.desiredTarget, StringForFeeReason(feeCalc.reason), feeCalc.est.decay,</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3094</div>
                            <div class="line-num2">3092</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">              feeCalc.est.pass.start, feeCalc.est.pass.end,</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3095</div>
                            <div class="line-num2">3093</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">              100 * feeCalc.est.pass.withinTarget &#x2F; (feeCalc.est.pass.totalConfirmed + feeCalc.est.pass.inMempool + feeCalc.est.pass.leftMempool),</span>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="d2h-code-linenumber d2h-info"></td>
                        <td class="d2h-info">
                            <div class="d2h-code-line d2h-info">@@ -3115,7 +3113,7 @@ bool CWallet::CommitTransaction(CTransactionRef tx, mapValue_t mapValue, std::ve</div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3115</div>
                            <div class="line-num2">3113</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        wtxNew.fTimeReceivedIsTxTime = true;</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3116</div>
                            <div class="line-num2">3114</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        wtxNew.fFromMe = true;</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3117</div>
                            <div class="line-num2">3115</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-del">
                            <div class="line-num1">3118</div>
                            <div class="line-num2"></div>
                        </td>
                        <td class="d2h-del">
                            <div class="d2h-code-line d2h-del">
                                <span class="d2h-code-line-prefix">-</span>
                                <span class="d2h-code-line-ctn">        <del>LogPrintf(&quot;[%s] </del>CommitTransaction:\n%s&quot;, <del>GetName(), </del>wtxNew.tx-&gt;ToString()); &#x2F;* Continued *&#x2F;</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-ins">
                            <div class="line-num1"></div>
                            <div class="line-num2">3116</div>
                        </td>
                        <td class="d2h-ins">
                            <div class="d2h-code-line d2h-ins">
                                <span class="d2h-code-line-prefix">+</span>
                                <span class="d2h-code-line-ctn">        <ins>WalletLogPrintf(&quot;</ins>CommitTransaction:\n%s&quot;, wtxNew.tx-&gt;ToString()); &#x2F;* Continued *&#x2F;</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3119</div>
                            <div class="line-num2">3117</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        {</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3120</div>
                            <div class="line-num2">3118</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">            &#x2F;&#x2F; Take key pair from key pool so it won&#x27;t be used again</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3121</div>
                            <div class="line-num2">3119</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">            reservekey.KeepKey();</span>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="d2h-code-linenumber d2h-info"></td>
                        <td class="d2h-info">
                            <div class="d2h-code-line d2h-info">@@ -3144,7 +3142,7 @@ bool CWallet::CommitTransaction(CTransactionRef tx, mapValue_t mapValue, std::ve</div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3144</div>
                            <div class="line-num2">3142</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        {</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3145</div>
                            <div class="line-num2">3143</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">            &#x2F;&#x2F; Broadcast</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3146</div>
                            <div class="line-num2">3144</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">            if (!wtx.AcceptToMemoryPool(maxTxFee, state)) {</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-del">
                            <div class="line-num1">3147</div>
                            <div class="line-num2"></div>
                        </td>
                        <td class="d2h-del">
                            <div class="d2h-code-line d2h-del">
                                <span class="d2h-code-line-prefix">-</span>
                                <span class="d2h-code-line-ctn">                <del>LogPrintf(&quot;[%s] </del>CommitTransaction(): Transaction cannot be broadcast immediately, %s\n&quot;, <del>GetName(), </del>FormatStateMessage(state));</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-ins">
                            <div class="line-num1"></div>
                            <div class="line-num2">3145</div>
                        </td>
                        <td class="d2h-ins">
                            <div class="d2h-code-line d2h-ins">
                                <span class="d2h-code-line-prefix">+</span>
                                <span class="d2h-code-line-ctn">                <ins>WalletLogPrintf(&quot;</ins>CommitTransaction(): Transaction cannot be broadcast immediately, %s\n&quot;, FormatStateMessage(state));</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3148</div>
                            <div class="line-num2">3146</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">                &#x2F;&#x2F; TODO: if we expect the failure to be long term or permanent, instead delete wtx from the wallet and return failure.</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3149</div>
                            <div class="line-num2">3147</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">            } else {</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3150</div>
                            <div class="line-num2">3148</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">                wtx.RelayWalletTransaction(connman);</span>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="d2h-code-linenumber d2h-info"></td>
                        <td class="d2h-info">
                            <div class="d2h-code-line d2h-info">@@ -3343,7 +3341,7 @@ bool CWallet::NewKeyPool()</div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3343</div>
                            <div class="line-num2">3341</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        if (!TopUpKeyPool()) {</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3344</div>
                            <div class="line-num2">3342</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">            return false;</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3345</div>
                            <div class="line-num2">3343</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        }</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-del">
                            <div class="line-num1">3346</div>
                            <div class="line-num2"></div>
                        </td>
                        <td class="d2h-del">
                            <div class="d2h-code-line d2h-del">
                                <span class="d2h-code-line-prefix">-</span>
                                <span class="d2h-code-line-ctn">        <del>LogPrintf(&quot;[%s] </del>CWallet::NewKeyPool rewrote keypool\n<del>&quot;, GetName());</del></span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-ins">
                            <div class="line-num1"></div>
                            <div class="line-num2">3344</div>
                        </td>
                        <td class="d2h-ins">
                            <div class="d2h-code-line d2h-ins">
                                <span class="d2h-code-line-prefix">+</span>
                                <span class="d2h-code-line-ctn">        <ins>WalletLogPrintf(&quot;</ins>CWallet::NewKeyPool rewrote keypool\n<ins>&quot;);</ins></span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3347</div>
                            <div class="line-num2">3345</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">    }</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3348</div>
                            <div class="line-num2">3346</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">    return true;</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3349</div>
                            <div class="line-num2">3347</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">}</span>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="d2h-code-linenumber d2h-info"></td>
                        <td class="d2h-info">
                            <div class="d2h-code-line d2h-info">@@ -3424,7 +3422,7 @@ bool CWallet::TopUpKeyPool(unsigned int kpSize)</div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3424</div>
                            <div class="line-num2">3422</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">            m_pool_key_to_index[pubkey.GetID()] = index;</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3425</div>
                            <div class="line-num2">3423</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        }</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3426</div>
                            <div class="line-num2">3424</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        if (missingInternal + missingExternal &gt; 0) {</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-del">
                            <div class="line-num1">3427</div>
                            <div class="line-num2"></div>
                        </td>
                        <td class="d2h-del">
                            <div class="d2h-code-line d2h-del">
                                <span class="d2h-code-line-prefix">-</span>
                                <span class="d2h-code-line-ctn">            <del>LogPrintf(&quot;[%s] </del>keypool added %d keys (%d internal), size=%u (%u internal)\n&quot;, <del>GetName(), </del>missingInternal + missingExternal, missingInternal, setInternalKeyPool.size() + setExternalKeyPool.size() + set_pre_split_keypool.size(), setInternalKeyPool.size());</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-ins">
                            <div class="line-num1"></div>
                            <div class="line-num2">3425</div>
                        </td>
                        <td class="d2h-ins">
                            <div class="d2h-code-line d2h-ins">
                                <span class="d2h-code-line-prefix">+</span>
                                <span class="d2h-code-line-ctn">            <ins>WalletLogPrintf(&quot;</ins>keypool added %d keys (%d internal), size=%u (%u internal)\n&quot;, missingInternal + missingExternal, missingInternal, setInternalKeyPool.size() + setExternalKeyPool.size() + set_pre_split_keypool.size(), setInternalKeyPool.size());</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3428</div>
                            <div class="line-num2">3426</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        }</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3429</div>
                            <div class="line-num2">3427</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">    }</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3430</div>
                            <div class="line-num2">3428</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">    return true;</span>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="d2h-code-linenumber d2h-info"></td>
                        <td class="d2h-info">
                            <div class="d2h-code-line d2h-info">@@ -3469,7 +3467,7 @@ bool CWallet::ReserveKeyFromKeyPool(int64_t&amp; nIndex, CKeyPool&amp; keypool, bool fRe</div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3469</div>
                            <div class="line-num2">3467</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        }</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3470</div>
                            <div class="line-num2">3468</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3471</div>
                            <div class="line-num2">3469</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        m_pool_key_to_index.erase(keypool.vchPubKey.GetID());</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-del">
                            <div class="line-num1">3472</div>
                            <div class="line-num2"></div>
                        </td>
                        <td class="d2h-del">
                            <div class="d2h-code-line d2h-del">
                                <span class="d2h-code-line-prefix">-</span>
                                <span class="d2h-code-line-ctn">        <del>LogPrintf(&quot;[%s] </del>keypool reserve %d\n&quot;, <del>GetName(), </del>nIndex);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-ins">
                            <div class="line-num1"></div>
                            <div class="line-num2">3470</div>
                        </td>
                        <td class="d2h-ins">
                            <div class="d2h-code-line d2h-ins">
                                <span class="d2h-code-line-prefix">+</span>
                                <span class="d2h-code-line-ctn">        <ins>WalletLogPrintf(&quot;</ins>keypool reserve %d\n&quot;, nIndex);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3473</div>
                            <div class="line-num2">3471</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">    }</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3474</div>
                            <div class="line-num2">3472</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">    return true;</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3475</div>
                            <div class="line-num2">3473</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">}</span>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="d2h-code-linenumber d2h-info"></td>
                        <td class="d2h-info">
                            <div class="d2h-code-line d2h-info">@@ -3479,7 +3477,7 @@ void CWallet::KeepKey(int64_t nIndex)</div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3479</div>
                            <div class="line-num2">3477</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">    &#x2F;&#x2F; Remove from key pool</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3480</div>
                            <div class="line-num2">3478</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">    WalletBatch batch(*database);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3481</div>
                            <div class="line-num2">3479</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">    batch.ErasePool(nIndex);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-del">
                            <div class="line-num1">3482</div>
                            <div class="line-num2"></div>
                        </td>
                        <td class="d2h-del">
                            <div class="d2h-code-line d2h-del">
                                <span class="d2h-code-line-prefix">-</span>
                                <span class="d2h-code-line-ctn">    <del>LogPrintf(&quot;[%s] </del>keypool keep %d\n&quot;, <del>GetName(), </del>nIndex);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-ins">
                            <div class="line-num1"></div>
                            <div class="line-num2">3480</div>
                        </td>
                        <td class="d2h-ins">
                            <div class="d2h-code-line d2h-ins">
                                <span class="d2h-code-line-prefix">+</span>
                                <span class="d2h-code-line-ctn">    <ins>WalletLogPrintf(&quot;</ins>keypool keep %d\n&quot;, nIndex);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3483</div>
                            <div class="line-num2">3481</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">}</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3484</div>
                            <div class="line-num2">3482</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3485</div>
                            <div class="line-num2">3483</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">void CWallet::ReturnKey(int64_t nIndex, bool fInternal, const CPubKey&amp; pubkey)</span>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="d2h-code-linenumber d2h-info"></td>
                        <td class="d2h-info">
                            <div class="d2h-code-line d2h-info">@@ -3496,7 +3494,7 @@ void CWallet::ReturnKey(int64_t nIndex, bool fInternal, const CPubKey&amp; pubkey)</div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3496</div>
                            <div class="line-num2">3494</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        }</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3497</div>
                            <div class="line-num2">3495</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        m_pool_key_to_index[pubkey.GetID()] = nIndex;</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3498</div>
                            <div class="line-num2">3496</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">    }</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-del">
                            <div class="line-num1">3499</div>
                            <div class="line-num2"></div>
                        </td>
                        <td class="d2h-del">
                            <div class="d2h-code-line d2h-del">
                                <span class="d2h-code-line-prefix">-</span>
                                <span class="d2h-code-line-ctn">    <del>LogPrintf(&quot;[%s] </del>keypool return %d\n&quot;, <del>GetName(), </del>nIndex);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-ins">
                            <div class="line-num1"></div>
                            <div class="line-num2">3497</div>
                        </td>
                        <td class="d2h-ins">
                            <div class="d2h-code-line d2h-ins">
                                <span class="d2h-code-line-prefix">+</span>
                                <span class="d2h-code-line-ctn">    <ins>WalletLogPrintf(&quot;</ins>keypool return %d\n&quot;, nIndex);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3500</div>
                            <div class="line-num2">3498</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">}</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3501</div>
                            <div class="line-num2">3499</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3502</div>
                            <div class="line-num2">3500</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">bool CWallet::GetKeyFromPool(CPubKey&amp; result, bool internal)</span>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="d2h-code-linenumber d2h-info"></td>
                        <td class="d2h-info">
                            <div class="d2h-code-line d2h-info">@@ -3754,7 +3752,7 @@ void CWallet::MarkReserveKeysAsUsed(int64_t keypool_id)</div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3754</div>
                            <div class="line-num2">3752</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        }</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3755</div>
                            <div class="line-num2">3753</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        LearnAllRelatedScripts(keypool.vchPubKey);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3756</div>
                            <div class="line-num2">3754</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        batch.ErasePool(index);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-del">
                            <div class="line-num1">3757</div>
                            <div class="line-num2"></div>
                        </td>
                        <td class="d2h-del">
                            <div class="d2h-code-line d2h-del">
                                <span class="d2h-code-line-prefix">-</span>
                                <span class="d2h-code-line-ctn">        <del>LogPrintf(&quot;[%s] </del>keypool index %d removed\n&quot;, <del>GetName(), </del>index);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-ins">
                            <div class="line-num1"></div>
                            <div class="line-num2">3755</div>
                        </td>
                        <td class="d2h-ins">
                            <div class="d2h-code-line d2h-ins">
                                <span class="d2h-code-line-prefix">+</span>
                                <span class="d2h-code-line-ctn">        <ins>WalletLogPrintf(&quot;</ins>keypool index %d removed\n&quot;, index);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3758</div>
                            <div class="line-num2">3756</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        it = setKeyPool-&gt;erase(it);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3759</div>
                            <div class="line-num2">3757</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">    }</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3760</div>
                            <div class="line-num2">3758</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">}</span>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="d2h-code-linenumber d2h-info"></td>
                        <td class="d2h-info">
                            <div class="d2h-code-line d2h-info">@@ -3918,7 +3916,7 @@ unsigned int CWallet::ComputeTimeSmart(const CWalletTx&amp; wtx) const</div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3918</div>
                            <div class="line-num2">3916</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">            int64_t blocktime = pindex-&gt;GetBlockTime();</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3919</div>
                            <div class="line-num2">3917</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">            nTimeSmart = std::max(latestEntry, std::min(blocktime, latestNow));</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3920</div>
                            <div class="line-num2">3918</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        } else {</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-del">
                            <div class="line-num1">3921</div>
                            <div class="line-num2"></div>
                        </td>
                        <td class="d2h-del">
                            <div class="d2h-code-line d2h-del">
                                <span class="d2h-code-line-prefix">-</span>
                                <span class="d2h-code-line-ctn">            <del>LogPrintf(&quot;[%</del>s<del>] %s</del>: found %s in block %s not in index\n&quot;, <del>GetName(), </del>__func__, wtx.GetHash().ToString(), wtx.hashBlock.ToString());</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-ins">
                            <div class="line-num1"></div>
                            <div class="line-num2">3919</div>
                        </td>
                        <td class="d2h-ins">
                            <div class="d2h-code-line d2h-ins">
                                <span class="d2h-code-line-prefix">+</span>
                                <span class="d2h-code-line-ctn">            <ins>WalletLogPrintf(&quot;%</ins>s: found %s in block %s not in index\n&quot;, __func__, wtx.GetHash().ToString(), wtx.hashBlock.ToString());</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3922</div>
                            <div class="line-num2">3920</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        }</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3923</div>
                            <div class="line-num2">3921</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">    }</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">3924</div>
                            <div class="line-num2">3922</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">    return nTimeSmart;</span>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="d2h-code-linenumber d2h-info"></td>
                        <td class="d2h-info">
                            <div class="d2h-code-line d2h-info">@@ -4099,12 +4097,12 @@ std::shared_ptr&lt;CWallet&gt; CWallet::CreateWalletFromFile(const std::string&amp; name,</div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">4099</div>
                            <div class="line-num2">4097</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        int nMaxVersion = gArgs.GetArg(&quot;-upgradewallet&quot;, 0);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">4100</div>
                            <div class="line-num2">4098</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        if (nMaxVersion == 0) &#x2F;&#x2F; the -upgradewallet without argument case</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">4101</div>
                            <div class="line-num2">4099</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        {</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-del">
                            <div class="line-num1">4102</div>
                            <div class="line-num2"></div>
                        </td>
                        <td class="d2h-del">
                            <div class="d2h-code-line d2h-del">
                                <span class="d2h-code-line-prefix">-</span>
                                <span class="d2h-code-line-ctn">            <del>LogPrintf(&quot;[%s] </del>Performing wallet upgrade to %i\n&quot;, <del>walletInstance-&gt;GetName(), </del>FEATURE_LATEST);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-ins">
                            <div class="line-num1"></div>
                            <div class="line-num2">4100</div>
                        </td>
                        <td class="d2h-ins">
                            <div class="d2h-code-line d2h-ins">
                                <span class="d2h-code-line-prefix">+</span>
                                <span class="d2h-code-line-ctn">            <ins>walletInstance-&gt;WalletLogPrintf(&quot;</ins>Performing wallet upgrade to %i\n&quot;, FEATURE_LATEST);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">4103</div>
                            <div class="line-num2">4101</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">            nMaxVersion = CLIENT_VERSION;</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">4104</div>
                            <div class="line-num2">4102</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">            walletInstance-&gt;SetMinVersion(FEATURE_LATEST); &#x2F;&#x2F; permanently upgrade the wallet immediately</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">4105</div>
                            <div class="line-num2">4103</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        }</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">4106</div>
                            <div class="line-num2">4104</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        else</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-del">
                            <div class="line-num1">4107</div>
                            <div class="line-num2"></div>
                        </td>
                        <td class="d2h-del">
                            <div class="d2h-code-line d2h-del">
                                <span class="d2h-code-line-prefix">-</span>
                                <span class="d2h-code-line-ctn">            <del>LogPrintf(&quot;[%s] </del>Allowing wallet upgrade up to %i\n&quot;, <del>walletInstance-&gt;GetName(), </del>nMaxVersion);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-ins">
                            <div class="line-num1"></div>
                            <div class="line-num2">4105</div>
                        </td>
                        <td class="d2h-ins">
                            <div class="d2h-code-line d2h-ins">
                                <span class="d2h-code-line-prefix">+</span>
                                <span class="d2h-code-line-ctn">            <ins>walletInstance-&gt;WalletLogPrintf(&quot;</ins>Allowing wallet upgrade up to %i\n&quot;, nMaxVersion);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">4108</div>
                            <div class="line-num2">4106</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        if (nMaxVersion &lt; walletInstance-&gt;GetVersion())</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">4109</div>
                            <div class="line-num2">4107</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        {</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">4110</div>
                            <div class="line-num2">4108</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">            InitError(_(&quot;Cannot downgrade wallet&quot;));</span>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="d2h-code-linenumber d2h-info"></td>
                        <td class="d2h-info">
                            <div class="d2h-code-line d2h-info">@@ -4259,7 +4257,7 @@ std::shared_ptr&lt;CWallet&gt; CWallet::CreateWalletFromFile(const std::string&amp; name,</div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">4259</div>
                            <div class="line-num2">4257</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">    walletInstance-&gt;m_spend_zero_conf_change = gArgs.GetBoolArg(&quot;-spendzeroconfchange&quot;, DEFAULT_SPEND_ZEROCONF_CHANGE);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">4260</div>
                            <div class="line-num2">4258</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">    walletInstance-&gt;m_signal_rbf = gArgs.GetBoolArg(&quot;-walletrbf&quot;, DEFAULT_WALLET_RBF);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">4261</div>
                            <div class="line-num2">4259</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-del">
                            <div class="line-num1">4262</div>
                            <div class="line-num2"></div>
                        </td>
                        <td class="d2h-del">
                            <div class="d2h-code-line d2h-del">
                                <span class="d2h-code-line-prefix">-</span>
                                <span class="d2h-code-line-ctn">    <del>LogPrintf(&quot;[%s] </del>wallet      %15dms\n&quot;, <del>walletInstance-&gt;GetName(), </del>GetTimeMillis() - nStart);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-ins">
                            <div class="line-num1"></div>
                            <div class="line-num2">4260</div>
                        </td>
                        <td class="d2h-ins">
                            <div class="d2h-code-line d2h-ins">
                                <span class="d2h-code-line-prefix">+</span>
                                <span class="d2h-code-line-ctn">    <ins>walletInstance-&gt;WalletLogPrintf(&quot;</ins>wallet      %15dms\n&quot;, GetTimeMillis() - nStart);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">4263</div>
                            <div class="line-num2">4261</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">4264</div>
                            <div class="line-num2">4262</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">    &#x2F;&#x2F; Try to top up keypool. No-op if the wallet is locked.</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">4265</div>
                            <div class="line-num2">4263</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">    walletInstance-&gt;TopUpKeyPool();</span>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="d2h-code-linenumber d2h-info"></td>
                        <td class="d2h-info">
                            <div class="d2h-code-line d2h-info">@@ -4295,7 +4293,7 @@ std::shared_ptr&lt;CWallet&gt; CWallet::CreateWalletFromFile(const std::string&amp; name,</div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">4295</div>
                            <div class="line-num2">4293</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        }</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">4296</div>
                            <div class="line-num2">4294</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">4297</div>
                            <div class="line-num2">4295</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        uiInterface.InitMessage(_(&quot;Rescanning...&quot;));</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-del">
                            <div class="line-num1">4298</div>
                            <div class="line-num2"></div>
                        </td>
                        <td class="d2h-del">
                            <div class="d2h-code-line d2h-del">
                                <span class="d2h-code-line-prefix">-</span>
                                <span class="d2h-code-line-ctn">        <del>LogPrintf(&quot;[%s] </del>Rescanning last %i blocks (from block %i)...\n&quot;, <del>walletInstance-&gt;GetName(), </del>chainActive.Height() - pindexRescan-&gt;nHeight, pindexRescan-&gt;nHeight);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-ins">
                            <div class="line-num1"></div>
                            <div class="line-num2">4296</div>
                        </td>
                        <td class="d2h-ins">
                            <div class="d2h-code-line d2h-ins">
                                <span class="d2h-code-line-prefix">+</span>
                                <span class="d2h-code-line-ctn">        <ins>walletInstance-&gt;WalletLogPrintf(&quot;</ins>Rescanning last %i blocks (from block %i)...\n&quot;, chainActive.Height() - pindexRescan-&gt;nHeight, pindexRescan-&gt;nHeight);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">4299</div>
                            <div class="line-num2">4297</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">4300</div>
                            <div class="line-num2">4298</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        &#x2F;&#x2F; No need to read and scan block if block was created before</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">4301</div>
                            <div class="line-num2">4299</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        &#x2F;&#x2F; our wallet birthday (as adjusted for block time variability)</span>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="d2h-code-linenumber d2h-info"></td>
                        <td class="d2h-info">
                            <div class="d2h-code-line d2h-info">@@ -4312,7 +4310,7 @@ std::shared_ptr&lt;CWallet&gt; CWallet::CreateWalletFromFile(const std::string&amp; name,</div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">4312</div>
                            <div class="line-num2">4310</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">            }</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">4313</div>
                            <div class="line-num2">4311</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">            walletInstance-&gt;ScanForWalletTransactions(pindexRescan, nullptr, reserver, true);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">4314</div>
                            <div class="line-num2">4312</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        }</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-del">
                            <div class="line-num1">4315</div>
                            <div class="line-num2"></div>
                        </td>
                        <td class="d2h-del">
                            <div class="d2h-code-line d2h-del">
                                <span class="d2h-code-line-prefix">-</span>
                                <span class="d2h-code-line-ctn">        <del>LogPrintf(&quot;[%s] </del>rescan      %15dms\n&quot;, <del>walletInstance-&gt;GetName(), </del>GetTimeMillis() - nStart);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-ins">
                            <div class="line-num1"></div>
                            <div class="line-num2">4313</div>
                        </td>
                        <td class="d2h-ins">
                            <div class="d2h-code-line d2h-ins">
                                <span class="d2h-code-line-prefix">+</span>
                                <span class="d2h-code-line-ctn">        <ins>walletInstance-&gt;WalletLogPrintf(&quot;</ins>rescan      %15dms\n&quot;, GetTimeMillis() - nStart);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">4316</div>
                            <div class="line-num2">4314</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        walletInstance-&gt;ChainStateFlushed(chainActive.GetLocator());</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">4317</div>
                            <div class="line-num2">4315</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        walletInstance-&gt;database-&gt;IncrementUpdateCounter();</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">4318</div>
                            <div class="line-num2">4316</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="d2h-code-linenumber d2h-info"></td>
                        <td class="d2h-info">
                            <div class="d2h-code-line d2h-info">@@ -4349,9 +4347,9 @@ std::shared_ptr&lt;CWallet&gt; CWallet::CreateWalletFromFile(const std::string&amp; name,</div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">4349</div>
                            <div class="line-num2">4347</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">4350</div>
                            <div class="line-num2">4348</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">    {</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">4351</div>
                            <div class="line-num2">4349</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        LOCK(walletInstance-&gt;cs_wallet);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-del">
                            <div class="line-num1">4352</div>
                            <div class="line-num2"></div>
                        </td>
                        <td class="d2h-del">
                            <div class="d2h-code-line d2h-del">
                                <span class="d2h-code-line-prefix">-</span>
                                <span class="d2h-code-line-ctn">        <del>LogPrintf(&quot;[%s] </del>setKeyPool.size() = %u\n&quot;,      walletInstance-&gt;<del>GetName(), walletInstance-&gt;</del>GetKeyPoolSize());</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-del">
                            <div class="line-num1">4353</div>
                            <div class="line-num2"></div>
                        </td>
                        <td class="d2h-del">
                            <div class="d2h-code-line d2h-del">
                                <span class="d2h-code-line-prefix">-</span>
                                <span class="d2h-code-line-ctn">        <del>LogPrintf(&quot;[%s] </del>mapWallet.size() = %u\n&quot;,       walletInstance-&gt;<del>GetName(), walletInstance-&gt;</del>mapWallet.size());</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-del">
                            <div class="line-num1">4354</div>
                            <div class="line-num2"></div>
                        </td>
                        <td class="d2h-del">
                            <div class="d2h-code-line d2h-del">
                                <span class="d2h-code-line-prefix">-</span>
                                <span class="d2h-code-line-ctn">        <del>LogPrintf(&quot;[%s] </del>mapAddressBook.size() = %u\n&quot;,  walletInstance-&gt;<del>GetName(), walletInstance-&gt;</del>mapAddressBook.size());</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-ins">
                            <div class="line-num1"></div>
                            <div class="line-num2">4350</div>
                        </td>
                        <td class="d2h-ins">
                            <div class="d2h-code-line d2h-ins">
                                <span class="d2h-code-line-prefix">+</span>
                                <span class="d2h-code-line-ctn">        <ins>walletInstance-&gt;WalletLogPrintf(&quot;</ins>setKeyPool.size() = %u\n&quot;,      walletInstance-&gt;GetKeyPoolSize());</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-ins">
                            <div class="line-num1"></div>
                            <div class="line-num2">4351</div>
                        </td>
                        <td class="d2h-ins">
                            <div class="d2h-code-line d2h-ins">
                                <span class="d2h-code-line-prefix">+</span>
                                <span class="d2h-code-line-ctn">        <ins>walletInstance-&gt;WalletLogPrintf(&quot;</ins>mapWallet.size() = %u\n&quot;,       walletInstance-&gt;mapWallet.size());</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-ins">
                            <div class="line-num1"></div>
                            <div class="line-num2">4352</div>
                        </td>
                        <td class="d2h-ins">
                            <div class="d2h-code-line d2h-ins">
                                <span class="d2h-code-line-prefix">+</span>
                                <span class="d2h-code-line-ctn">        <ins>walletInstance-&gt;WalletLogPrintf(&quot;</ins>mapAddressBook.size() = %u\n&quot;,  walletInstance-&gt;mapAddressBook.size());</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">4355</div>
                            <div class="line-num2">4353</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">    }</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">4356</div>
                            <div class="line-num2">4354</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">4357</div>
                            <div class="line-num2">4355</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">    return walletInstance;</span>
                            </div>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div id="d2h-142430" class="d2h-file-wrapper" data-lang="h">
        <div class="d2h-file-header">
    <span class="d2h-file-name-wrapper">
    <span class="d2h-icon-wrapper"><svg aria-hidden="true" class="d2h-icon" height="16" version="1.1" viewBox="0 0 12 16" width="12">
    <path d="M6 5H2v-1h4v1zM2 8h7v-1H2v1z m0 2h7v-1H2v1z m0 2h7v-1H2v1z m10-7.5v9.5c0 0.55-0.45 1-1 1H1c-0.55 0-1-0.45-1-1V2c0-0.55 0.45-1 1-1h7.5l3.5 3.5z m-1 0.5L8 2H1v12h10V5z"></path>
</svg></span>
    <span class="d2h-file-name">src/wallet/wallet.h</span>
    <span class="d2h-tag d2h-changed d2h-changed-tag">CHANGED</span></span>
        </div>
        <div class="d2h-file-diff">
            <div class="d2h-code-wrapper">
                <table class="d2h-diff-table">
                    <tbody class="d2h-diff-tbody">
                    <tr>
                        <td class="d2h-code-linenumber d2h-info"></td>
                        <td class="d2h-info">
                            <div class="d2h-code-line d2h-info">@@ -1198,6 +1198,11 @@ public:</div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1198</div>
                            <div class="line-num2">1198</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1199</div>
                            <div class="line-num2">1199</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">    &#x2F;** Whether a given output is spendable by this wallet *&#x2F;</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1200</div>
                            <div class="line-num2">1200</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">    bool OutputEligibleForSpending(const COutput&amp; output, const CoinEligibilityFilter&amp; eligibility_filter) const;</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-ins">
                            <div class="line-num1"></div>
                            <div class="line-num2">1201</div>
                        </td>
                        <td class="d2h-ins">
                            <div class="d2h-code-line d2h-ins">
                                <span class="d2h-code-line-prefix">+</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-ins">
                            <div class="line-num1"></div>
                            <div class="line-num2">1202</div>
                        </td>
                        <td class="d2h-ins">
                            <div class="d2h-code-line d2h-ins">
                                <span class="d2h-code-line-prefix">+</span>
                                <span class="d2h-code-line-ctn">    template&lt;typename... Params&gt;</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-ins">
                            <div class="line-num1"></div>
                            <div class="line-num2">1203</div>
                        </td>
                        <td class="d2h-ins">
                            <div class="d2h-code-line d2h-ins">
                                <span class="d2h-code-line-prefix">+</span>
                                <span class="d2h-code-line-ctn">    void WalletLogPrintf(std::string fmt, Params... parameters) const {</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-ins">
                            <div class="line-num1"></div>
                            <div class="line-num2">1204</div>
                        </td>
                        <td class="d2h-ins">
                            <div class="d2h-code-line d2h-ins">
                                <span class="d2h-code-line-prefix">+</span>
                                <span class="d2h-code-line-ctn">        LogPrintf((&quot;[&quot; + GetName() + &quot;] &quot; + fmt).c_str(), parameters...);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-ins">
                            <div class="line-num1"></div>
                            <div class="line-num2">1205</div>
                        </td>
                        <td class="d2h-ins">
                            <div class="d2h-code-line d2h-ins">
                                <span class="d2h-code-line-prefix">+</span>
                                <span class="d2h-code-line-ctn">    };</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1201</div>
                            <div class="line-num2">1206</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">};</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1202</div>
                            <div class="line-num2">1207</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">1203</div>
                            <div class="line-num2">1208</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">&#x2F;** A key allocated from the key pool. *&#x2F;</span>
                            </div>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div id="d2h-312169" class="d2h-file-wrapper" data-lang="cpp">
        <div class="d2h-file-header">
    <span class="d2h-file-name-wrapper">
    <span class="d2h-icon-wrapper"><svg aria-hidden="true" class="d2h-icon" height="16" version="1.1" viewBox="0 0 12 16" width="12">
    <path d="M6 5H2v-1h4v1zM2 8h7v-1H2v1z m0 2h7v-1H2v1z m0 2h7v-1H2v1z m10-7.5v9.5c0 0.55-0.45 1-1 1H1c-0.55 0-1-0.45-1-1V2c0-0.55 0.45-1 1-1h7.5l3.5 3.5z m-1 0.5L8 2H1v12h10V5z"></path>
</svg></span>
    <span class="d2h-file-name">src/wallet/walletdb.cpp</span>
    <span class="d2h-tag d2h-changed d2h-changed-tag">CHANGED</span></span>
        </div>
        <div class="d2h-file-diff">
            <div class="d2h-code-wrapper">
                <table class="d2h-diff-table">
                    <tbody class="d2h-diff-tbody">
                    <tr>
                        <td class="d2h-code-linenumber d2h-info"></td>
                        <td class="d2h-info">
                            <div class="d2h-code-line d2h-info">@@ -546,7 +546,7 @@ DBErrors WalletBatch::LoadWallet(CWallet* pwallet)</div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">546</div>
                            <div class="line-num2">546</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        Dbc* pcursor = m_batch.GetCursor();</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">547</div>
                            <div class="line-num2">547</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        if (!pcursor)</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">548</div>
                            <div class="line-num2">548</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        {</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-del">
                            <div class="line-num1">549</div>
                            <div class="line-num2"></div>
                        </td>
                        <td class="d2h-del">
                            <div class="d2h-code-line d2h-del">
                                <span class="d2h-code-line-prefix">-</span>
                                <span class="d2h-code-line-ctn">            <del>LogPrintf(&quot;[%s] </del>Error getting wallet database cursor\n<del>&quot;, pwallet-&gt;GetName());</del></span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-ins">
                            <div class="line-num1"></div>
                            <div class="line-num2">549</div>
                        </td>
                        <td class="d2h-ins">
                            <div class="d2h-code-line d2h-ins">
                                <span class="d2h-code-line-prefix">+</span>
                                <span class="d2h-code-line-ctn">            <ins>pwallet-&gt;WalletLogPrintf(&quot;</ins>Error getting wallet database cursor\n<ins>&quot;);</ins></span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">550</div>
                            <div class="line-num2">550</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">            return DBErrors::CORRUPT;</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">551</div>
                            <div class="line-num2">551</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        }</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">552</div>
                            <div class="line-num2">552</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="d2h-code-linenumber d2h-info"></td>
                        <td class="d2h-info">
                            <div class="d2h-code-line d2h-info">@@ -560,7 +560,7 @@ DBErrors WalletBatch::LoadWallet(CWallet* pwallet)</div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">560</div>
                            <div class="line-num2">560</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">                break;</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">561</div>
                            <div class="line-num2">561</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">            else if (ret != 0)</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">562</div>
                            <div class="line-num2">562</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">            {</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-del">
                            <div class="line-num1">563</div>
                            <div class="line-num2"></div>
                        </td>
                        <td class="d2h-del">
                            <div class="d2h-code-line d2h-del">
                                <span class="d2h-code-line-prefix">-</span>
                                <span class="d2h-code-line-ctn">                <del>LogPrintf(&quot;[%s] </del>Error reading next record from wallet database\n<del>&quot;, pwallet-&gt;GetName());</del></span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-ins">
                            <div class="line-num1"></div>
                            <div class="line-num2">563</div>
                        </td>
                        <td class="d2h-ins">
                            <div class="d2h-code-line d2h-ins">
                                <span class="d2h-code-line-prefix">+</span>
                                <span class="d2h-code-line-ctn">                <ins>pwallet-&gt;WalletLogPrintf(&quot;</ins>Error reading next record from wallet database\n<ins>&quot;);</ins></span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">564</div>
                            <div class="line-num2">564</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">                return DBErrors::CORRUPT;</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">565</div>
                            <div class="line-num2">565</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">            }</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">566</div>
                            <div class="line-num2">566</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="d2h-code-linenumber d2h-info"></td>
                        <td class="d2h-info">
                            <div class="d2h-code-line d2h-info">@@ -582,7 +582,7 @@ DBErrors WalletBatch::LoadWallet(CWallet* pwallet)</div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">582</div>
                            <div class="line-num2">582</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">                }</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">583</div>
                            <div class="line-num2">583</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">            }</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">584</div>
                            <div class="line-num2">584</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">            if (!strErr.empty())</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-del">
                            <div class="line-num1">585</div>
                            <div class="line-num2"></div>
                        </td>
                        <td class="d2h-del">
                            <div class="d2h-code-line d2h-del">
                                <span class="d2h-code-line-prefix">-</span>
                                <span class="d2h-code-line-ctn">                <del>LogPrintf</del>(&quot;[%s] %s\n&quot;, <del>pwallet-&gt;GetName(), </del>strErr);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-ins">
                            <div class="line-num1"></div>
                            <div class="line-num2">585</div>
                        </td>
                        <td class="d2h-ins">
                            <div class="d2h-code-line d2h-ins">
                                <span class="d2h-code-line-prefix">+</span>
                                <span class="d2h-code-line-ctn">                <ins>pwallet-&gt;WalletLogPrintf</ins>(&quot;[%s] %s\n&quot;, strErr);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">586</div>
                            <div class="line-num2">586</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        }</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">587</div>
                            <div class="line-num2">587</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        pcursor-&gt;close();</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">588</div>
                            <div class="line-num2">588</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">    }</span>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="d2h-code-linenumber d2h-info"></td>
                        <td class="d2h-info">
                            <div class="d2h-code-line d2h-info">@@ -601,10 +601,10 @@ DBErrors WalletBatch::LoadWallet(CWallet* pwallet)</div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">601</div>
                            <div class="line-num2">601</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">    if (result != DBErrors::LOAD_OK)</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">602</div>
                            <div class="line-num2">602</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">        return result;</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">603</div>
                            <div class="line-num2">603</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-del">
                            <div class="line-num1">604</div>
                            <div class="line-num2"></div>
                        </td>
                        <td class="d2h-del">
                            <div class="d2h-code-line d2h-del">
                                <span class="d2h-code-line-prefix">-</span>
                                <span class="d2h-code-line-ctn">    <del>LogPrintf(&quot;[%s] </del>nFileVersion = %d\n&quot;, <del>pwallet-&gt;GetName(), </del>wss.nFileVersion);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-ins">
                            <div class="line-num1"></div>
                            <div class="line-num2">604</div>
                        </td>
                        <td class="d2h-ins">
                            <div class="d2h-code-line d2h-ins">
                                <span class="d2h-code-line-prefix">+</span>
                                <span class="d2h-code-line-ctn">    <ins>pwallet-&gt;WalletLogPrintf(&quot;</ins>nFileVersion = %d\n&quot;, wss.nFileVersion);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">605</div>
                            <div class="line-num2">605</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-del">
                            <div class="line-num1">606</div>
                            <div class="line-num2"></div>
                        </td>
                        <td class="d2h-del">
                            <div class="d2h-code-line d2h-del">
                                <span class="d2h-code-line-prefix">-</span>
                                <span class="d2h-code-line-ctn">    <del>LogPrintf(&quot;[%s] </del>Keys: %u plaintext, %u encrypted, %u w&#x2F; metadata, %u total. Unknown wallet records: %u\n&quot;,</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-del">
                            <div class="line-num1">607</div>
                            <div class="line-num2"></div>
                        </td>
                        <td class="d2h-del">
                            <div class="d2h-code-line d2h-del">
                                <span class="d2h-code-line-prefix">-</span>
                                <span class="d2h-code-line-ctn">           <del>pwallet-&gt;GetName(), </del>wss.nKeys, wss.nCKeys, wss.nKeyMeta, wss.nKeys + wss.nCKeys, wss.m_unknown_records);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-ins">
                            <div class="line-num1"></div>
                            <div class="line-num2">606</div>
                        </td>
                        <td class="d2h-ins">
                            <div class="d2h-code-line d2h-ins">
                                <span class="d2h-code-line-prefix">+</span>
                                <span class="d2h-code-line-ctn">    <ins>pwallet-&gt;WalletLogPrintf(&quot;</ins>Keys: %u plaintext, %u encrypted, %u w&#x2F; metadata, %u total. Unknown wallet records: %u\n&quot;,</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-ins">
                            <div class="line-num1"></div>
                            <div class="line-num2">607</div>
                        </td>
                        <td class="d2h-ins">
                            <div class="d2h-code-line d2h-ins">
                                <span class="d2h-code-line-prefix">+</span>
                                <span class="d2h-code-line-ctn">           wss.nKeys, wss.nCKeys, wss.nKeyMeta, wss.nKeys + wss.nCKeys, wss.m_unknown_records);</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">608</div>
                            <div class="line-num2">608</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">609</div>
                            <div class="line-num2">609</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">    &#x2F;&#x2F; nTimeFirstKey is only reliable if all keys have metadata</span>
                            </div>
                        </td>
                    </tr><tr>
                        <td class="d2h-code-linenumber d2h-cntx">
                            <div class="line-num1">610</div>
                            <div class="line-num2">610</div>
                        </td>
                        <td class="d2h-cntx">
                            <div class="d2h-code-line d2h-cntx">
                                <span class="d2h-code-line-prefix"> </span>
                                <span class="d2h-code-line-ctn">    if ((wss.nKeys + wss.nCKeys + wss.nWatchKeys) != wss.nKeyMeta)</span>
                            </div>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
</div>
</body>
</html>
